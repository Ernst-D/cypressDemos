version: 2.1
orbs:
  cypress: cypress-io/cypress@1

executors:
  chrome-only:
    docker:
      - image: "cypress/browsers:node16.13.0-chrome95-ff94"
    resource_class: medium

linux-workflow: &linux-workflow
  jobs:
    # Run Webmail E2E tests in desktop Chrome
    - cypress/run:
        name: "Linux - Chrome - Webmail e2e - Desktop"
        browser: chrome
        executor: chrome-only
        pre-steps:
          - run:
              name: Cypress info
              command: npx cypress -v
        start: npm run e2e:webmail

workflows:
  linux:
    <<: *linux-workflow